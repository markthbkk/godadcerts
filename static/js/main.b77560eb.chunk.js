(this.webpackJsonpgodaddycerts=this.webpackJsonpgodaddycerts||[]).push([[0],{178:function(e,t,c){},179:function(e,t,c){},181:function(e,t,c){},186:function(e,t,c){},187:function(e,t,c){},202:function(e,t,c){},203:function(e,t,c){"use strict";c.r(t);var a=c(0),n=c(145),r=c.n(n),s=(c(178),c(158)),i=c(27),o=c(68),d=c(28),l=(c(179),c(4)),j=function(e){var t=e.date.toLocaleString("en-US",{month:"long"}),c=e.date.toLocaleString("en-US",{day:"2-digit"}),a=e.date.getFullYear();return Object(l.jsxs)("div",{className:"cert-date",children:[Object(l.jsx)("div",{className:"cert-date__day",children:c}),Object(l.jsx)("div",{className:"cert-date__month",children:t}),Object(l.jsx)("div",{className:"cert-date__year",children:a})]})},u=(c(181),c(77)),b=function(e){var t=function(){var t=Object(o.a)(Object(i.a)().mark((function t(c){var a;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(c.target.dataset.certid),t.next=3,u.a.delete("https://certsapi.onrender.com/api/v1/certs/".concat(c.target.dataset.certid));case 3:a=t.sent,console.log(a),204===a.status&&e.deleteHandler(c.target.dataset.certid);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(l.jsxs)("div",{className:"cert-item-wrapper",children:[Object(l.jsxs)("div",{className:"cert-item-top-row",children:[Object(l.jsx)("div",{className:"Cert-item__subjectName",children:e.subjectName}),Object(l.jsx)("button",{type:"submit",onClick:function(e){return t(e)},className:"deleteCert","data-certid":e.id,children:"X"})]}),Object(l.jsxs)("div",{className:"cert-item",children:[Object(l.jsx)("h2",{children:"Subscription Started"}),Object(l.jsx)(j,{date:e.subStart})]}),Object(l.jsxs)("div",{className:"cert-item",children:[Object(l.jsx)("h2",{children:"Subscription Ends"}),Object(l.jsx)(j,{date:e.subEnd})]}),Object(l.jsxs)("div",{className:"cert-item",children:[Object(l.jsx)("h2",{children:"Certificate Expires"}),Object(l.jsx)(j,{date:e.certExpiry})]})]})},O=(c(186),function(e){return console.log(e),Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{className:"infoText2",children:Object(l.jsx)("p",{children:"Sorted by Certificate Expiry"})}),e.items.map((function(t){return Object(l.jsx)(b,{subjectName:t.subjectName,subStart:new Date(t.subscriptionStartDate),subEnd:new Date(t.subscriptionEndDate),certExpiry:new Date(t.certificateExpiryDate),id:t.id,deleteHandler:e.certDeleteHandler},t._id)}))]})}),h=(c(187),c(217)),p=c(219),m=c(218),x=c(152);function f(e){var t=Object(a.useState)(!1),c=Object(d.a)(t,2),n=c[0],r=c[1],s=Object(a.useState)(""),j=Object(d.a)(s,2),b=j[0],O=j[1],f=Object(a.useState)(""),v=Object(d.a)(f,2),g=v[0],N=v[1],y=Object(a.useState)(""),D=Object(d.a)(y,2),S=D[0],E=D[1],w=Object(a.useState)(""),C=Object(d.a)(w,2),k=C[0],Y=C[1],F=Object(a.useState)(!1),_=Object(d.a)(F,2),L=_[0],H=_[1],T=Object(a.useState)(""),B=Object(d.a)(T,2),M=B[0],A=B[1],P=Object(a.useState)(""),U=Object(d.a)(P,2),G=U[0],I=U[1],J=function(){var t=Object(o.a)(Object(i.a)().mark((function t(){var c,a,n;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={subjectName:b,subscriptionStartDate:g,subscriptionEndDate:S,certificateExpiryDate:k},t.prev=1,t.next=4,u.a.post("https://certsapi.onrender.com/api/v1/certs",c,{headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}});case 4:a=t.sent,console.log(a),c.id=a.data.id,console.log(c),200===a.status&&(e.submitHandler(c),V()),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0),t.t0.response.data.message.keyValue?(n=Object.keys(t.t0.response.data.message.keyValue)[0],A("Error code: ".concat(t.t0.response.data.message.code)),I("There was a problem entering: ".concat(n," - Please re-enter data in the correct format - Subject Names must be unique"))):t.t0.response.data.message.message&&(A("".concat(t.t0.response.data.message.message)),I("Please re-enter the data in the correct format")),H(!0);case 16:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(){return t.apply(this,arguments)}}(),R=document.getElementById("addButton"),V=function(){return R.classList.toggle("hidden"),r(!n)};return Object(l.jsxs)("div",{children:[Object(l.jsx)(m.a,{onClose:function(){return H(!1)},isShown:L,children:function(){return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(m.a.Header,{title:"Form submit error",onClose:function(){return H(!1)}}),Object(l.jsxs)(m.a.Content,{children:[Object(l.jsx)(x.a,{children:"Your attempt to post this form data has failed"}),Object(l.jsx)(x.b,{children:M}),Object(l.jsx)(x.b,{children:G})]})]})}}),Object(l.jsx)("div",{id:"addButton",className:"certFormToggle",children:Object(l.jsx)("button",{type:"submit",onClick:function(){return V()},children:"Add"})}),Object(l.jsx)("div",{children:n?Object(l.jsx)("div",{className:"formLayout",children:Object(l.jsxs)(h.a,{className:"create-form",children:[Object(l.jsx)(h.a.Field,{children:Object(l.jsxs)("div",{className:"label",children:[Object(l.jsx)("label",{children:"Subject Name"}),Object(l.jsx)("input",{placeholder:"Subject Name",onChange:function(e){return O(e.target.value)},spellCheck:"false"})]})}),Object(l.jsx)(h.a.Field,{children:Object(l.jsxs)("div",{className:"label",children:[Object(l.jsx)("label",{children:"Subscription Start Date"}),Object(l.jsx)("input",{placeholder:"YYYY-MM-DD",onChange:function(e){return N(e.target.value)}})]})}),Object(l.jsx)(h.a.Field,{children:Object(l.jsxs)("div",{className:"label",children:[Object(l.jsx)("label",{children:"Subscription End Date"}),Object(l.jsx)("input",{placeholder:"YYYY-MM-DD",onChange:function(e){return E(e.target.value)}})]})}),Object(l.jsx)(h.a.Field,{children:Object(l.jsxs)("div",{className:"label",children:[Object(l.jsx)("label",{children:"Certificate Expiry Date"}),Object(l.jsx)("input",{placeholder:"YYYY-MM-DD",onChange:function(e){return Y(e.target.value)}})]})}),Object(l.jsxs)("div",{id:"buttonsRow",children:[Object(l.jsx)("div",{children:Object(l.jsx)(p.a,{className:"submitButton",onClick:J,type:"submit",children:"Submit"})}),Object(l.jsx)("div",{children:Object(l.jsx)(p.a,{className:"submitButton",onClick:V,type:"submit",children:"Cancel"})})]})]})}):""})]})}c(202);var v=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),c=t[0],n=t[1],r=function(){var e=Object(o.a)(Object(i.a)().mark((function e(){var t,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("https://certsapi.onrender.com/api/v1/certs");case 2:t=e.sent,console.log(t.data),c=t.data.sort((function(e,t){return Number(new Date(e.certificateExpiryDate))-Number(new Date(t.certificateExpiryDate))})),200===t.status&&n(c);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){r()}),[]),Object(l.jsxs)("div",{className:"AppFrame",children:[Object(l.jsxs)("div",{className:"infoText1",children:[Object(l.jsx)("div",{children:Object(l.jsx)("img",{src:"GoDaddyLogo.jpg",alt:"GoDaddy Logo"})}),Object(l.jsx)("h2",{children:"SSL Certificates"})]}),Object(l.jsx)(f,{submitHandler:function(e){n((function(t){return[e].concat(Object(s.a)(t)).sort((function(e,t){return Number(new Date(e.certificateExpiryDate))-Number(new Date(t.certificateExpiryDate))}))}))}}),Object(l.jsx)(O,{items:c,certDeleteHandler:function(e){console.log("Preparing to DELETE ".concat(e)),n((function(t){return t.filter((function(t){return t.id!==e}))}))}})]})};r.a.createRoot(document.getElementById("root")).render(Object(l.jsx)(v,{}))}},[[203,1,2]]]);
//# sourceMappingURL=main.b77560eb.chunk.js.map